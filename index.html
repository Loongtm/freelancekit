<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>FreelanceKit — Quotes • Invoices • Contracts</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0f172a" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- App status bar -->
  <div id="app-status" role="status" aria-live="polite" class="status-bar">
    <span id="pwa-state">PWA ready</span> • <span id="net-state">Online</span>
  </div>

  <header class="container header">
    <h1 class="app-title">FreelanceKit</h1>
    <div class="header-actions">
      <button id="installPWA" class="btn ghost" aria-label="Install as app">Install</button>
      <a id="buyPro" class="btn primary lock" href="https://ko-fi.com/loongtm" target="_blank" rel="noopener">Unlock Pro</a>
    </div>
  </header>

  <main id="app" class="container content" aria-describedby="workflow">
    <p id="workflow" class="muted">Workflow: Fill → Preview → Export/Save</p>

    <!-- Your Details -->
    <section class="card" aria-labelledby="sec-your">
      <h2 id="sec-your">Your Details</h2>
      <div class="grid-2">
        <label>Business / Name
          <input id="yourName" required placeholder="Acme Studio" autocomplete="organization" />
        </label>
        <label>Email
          <input id="yourEmail" type="email" required placeholder="you@domain.com" autocomplete="email" />
        </label>
        <label>Address
          <textarea id="yourAddress" placeholder="Street, City, Country"></textarea>
        </label>
        <label>Phone
          <input id="yourPhone" type="tel" placeholder="+60 12-345 6789" autocomplete="tel" />
        </label>
      </div>
    </section>

    <!-- Client Details -->
    <section class="card" aria-labelledby="sec-client">
      <h2 id="sec-client">Client Details</h2>
      <div class="grid-2">
        <label>Client Name
          <input id="clientName" required placeholder="Client Co. Ltd." />
        </label>
        <label>Client Email
          <input id="clientEmail" type="email" placeholder="ap@client.com" />
        </label>
        <label>Client Address
          <textarea id="clientAddress" placeholder="Street, City, Country"></textarea>
        </label>
        <label>PO / Reference
          <input id="clientRef" placeholder="PO-2025-0012" />
        </label>
      </div>
    </section>

    <!-- Document -->
    <section class="card" aria-labelledby="sec-doc">
      <h2 id="sec-doc">Document</h2>
      <div class="grid-3">
        <label>Type
          <select id="docType" required>
            <option value="invoice">Invoice</option>
            <option value="quote">Quote</option>
            <option value="contract">Contract</option>
          </select>
        </label>
        <label>Document No.
          <input id="docNo" required pattern="[A-Za-z0-9-_]{1,32}" placeholder="INV-2025-0001" />
        </label>
        <label>Date
          <input id="docDate" type="date" required />
        </label>
        <label>Currency
          <select id="currency" required>
            <option>MYR</option><option>USD</option><option>EUR</option><option>SGD</option><option>CNY</option>
          </select>
        </label>
        <label>Tax %
          <input id="taxRate" inputmode="decimal" pattern="^([0-9]|[1-9][0-9]|100)(\\.[0-9]{1,2})?$" placeholder="0–100" />
        </label>
      </div>
      <div class="toolbar-inline">
        <button id="loadJson" class="btn">Load JSON</button>
        <button id="saveJson" class="btn">Save JSON</button>
        <button id="importClientsCSV" class="btn lock" disabled aria-disabled="true" title="Pro only">Import Clients CSV (Pro)</button>
      </div>
    </section>

    <!-- Line Items -->
    <section class="card" aria-labelledby="sec-items">
      <h2 id="sec-items">Line Items</h2>
      <div class="items-head">
        <span>Description</span><span>Qty</span><span>Unit Price</span><span>Tax %</span><span>Amount</span><span></span>
      </div>
      <div id="lineItems" class="items-list" role="table" aria-label="Line items"></div>
      <div class="toolbar-inline">
        <button id="addItem" class="btn primary">Add Item</button>
        <button id="clearItems" class="btn danger ghost">Clear All</button>
      </div>
    </section>

    <!-- Notes / Terms -->
    <section class="card" aria-labelledby="sec-notes">
      <h2 id="sec-notes">Notes & Terms</h2>
      <div class="grid-2">
        <label>Notes
          <textarea id="notes" placeholder="Optional notes to the client"></textarea>
        </label>
        <label>Terms
          <textarea id="terms" placeholder="Payment due in 14 days. Late fees may apply."></textarea>
        </label>
      </div>
    </section>

    <!-- Totals (sticky) -->
    <section id="totals" class="card sticky" aria-live="polite">
      <div class="totals-row">
        <div>Subtotal</div><div id="subtotal">—</div>
      </div>
      <div class="totals-row">
        <div>Tax</div><div id="taxAmount">—</div>
      </div>
      <div class="totals-row total">
        <div>Total</div><div id="grandTotal">—</div>
      </div>
    </section>
  </main>

  <!-- Floating action bar -->
  <nav class="fab" aria-label="Primary actions">
    <button id="previewPDF" class="btn primary">Preview / Print (Ctrl+P)</button>
    <button id="exportPDF" class="btn">Export PDF</button>
  </nav>

  <!-- Toasts -->
  <div id="toasts" class="toasts" aria-live="polite"></div>

  <footer class="container footer">
    <small class="muted">Made with FreelanceKit • <a href="/pages/privacy.html">Privacy</a> • <a href="/pages/terms.html">Terms</a></small>
  </footer>

  <script src="app.js" defer></script>
  <script src="sw.js" defer></script>
</body>
</html>
