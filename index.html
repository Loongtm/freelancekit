<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>FreelanceKit — Quotes • Invoices • Contracts</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0f172a" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- App status bar -->
  <div id="app-status" role="status" aria-live="polite" class="status-bar">
    <span id="pwa-state">PWA ready</span> • <span id="net-state">Online</span>
  </div>

  <header class="container header">
    <h1 class="app-title">FreelanceKit</h1>
    <div class="header-actions">
      <select id="langSwitcher" aria-label="Language">
        <option value="en">English</option>
        <option value="zh">中文</option>
      </select>
      <button id="installPWA" class="btn ghost" aria-label="Install as app">Install</button>
      <a id="buyPro" class="btn primary lock" href="#" rel="noopener">Unlock Pro</a>
    </div>
  </header>

  <main id="app" class="container content" aria-describedby="workflow">
    <p id="workflow" class="muted" data-i18n="workflow">Workflow: Fill → Preview → Export/Save</p>

    <!-- Your Details -->
    <section class="card" aria-labelledby="sec-your">
      <h2 id="sec-your" data-i18n="yourDetails">Your Details</h2>
      <div class="grid-2">
        <label data-i18n-label="yourName">
          <span>Business / Name</span>
          <input id="yourName" required placeholder="Acme Studio" autocomplete="organization" />
        </label>
        <label data-i18n-label="yourEmail">
          <span>Email</span>
          <input id="yourEmail" type="email" required placeholder="you@domain.com" autocomplete="email" />
        </label>
        <label data-i18n-label="yourAddress">
          <span>Address</span>
          <textarea id="yourAddress" placeholder="Street, City, Country"></textarea>
        </label>
        <label data-i18n-label="yourPhone">
          <span>Phone</span>
          <input id="yourPhone" type="tel" placeholder="+60 12-345 6789" autocomplete="tel" />
        </label>
      </div>
    </section>

    <!-- Client Details -->
    <section class="card" aria-labelledby="sec-client">
      <h2 id="sec-client" data-i18n="clientDetails">Client Details</h2>
      <div class="grid-2">
        <label data-i18n-label="clientName">
          <span>Client Name</span>
          <input id="clientName" required placeholder="Client Co. Ltd." />
        </label>
        <label data-i18n-label="clientEmail">
          <span>Client Email</span>
          <input id="clientEmail" type="email" placeholder="ap@client.com" />
        </label>
        <label data-i18n-label="clientAddress">
          <span>Client Address</span>
          <textarea id="clientAddress" placeholder="Street, City, Country"></textarea>
        </label>
        <label data-i18n-label="clientRef">
          <span>PO / Reference</span>
          <input id="clientRef" placeholder="PO-2025-0012" />
        </label>
      </div>
    </section>

    <!-- Document -->
    <section class="card" aria-labelledby="sec-doc">
      <h2 id="sec-doc" data-i18n="document">Document</h2>
      <div class="grid-3">
        <label data-i18n-label="type">
          <span>Type</span>
          <select id="docType" required>
            <option value="invoice" data-i18n="invoice">Invoice</option>
            <option value="quote" data-i18n="quote">Quote</option>
            <option value="contract" data-i18n="contract">Contract</option>
          </select>
        </label>
        <label data-i18n-label="docNo">
          <span>Document No.</span>
          <input id="docNo" required pattern="[A-Za-z0-9-_]{1,32}" placeholder="INV-2025-0001" />
        </label>
        <label data-i18n-label="date">
          <span>Date</span>
          <input id="docDate" type="date" required />
        </label>
        <label data-i18n-label="currency">
          <span>Currency</span>
          <select id="currency" required>
            <option>MYR</option><option>USD</option><option>EUR</option><option>SGD</option><option>CNY</option>
          </select>
        </label>
        <label data-i18n-label="tax">
          <span>Tax %</span>
          <input id="taxRate" inputmode="decimal" pattern="^([0-9]|[1-9][0-9]|100)(\\.[0-9]{1,2})?$" placeholder="0–100" />
        </label>
      </div>
      <div class="toolbar-inline">
        <button id="loadJson" class="btn" data-i18n="loadJson">Load JSON</button>
        <button id="saveJson" class="btn" data-i18n="saveJson">Save JSON</button>
        <button id="importClientsCSV" class="btn lock" disabled aria-disabled="true" title="Pro only" data-i18n="importCSV">Import Clients CSV (Pro)</button>
      </div>
    </section>

    <!-- Line Items -->
    <section class="card" aria-labelledby="sec-items">
      <h2 id="sec-items" data-i18n="lineItems">Line Items</h2>
      <div class="items-head">
        <span data-i18n="desc">Description</span>
        <span data-i18n="qty">Qty</span>
        <span data-i18n="unitPrice">Unit Price</span>
        <span data-i18n="taxShort">Tax %</span>
        <span data-i18n="amount">Amount</span>
        <span></span>
      </div>
      <div id="lineItems" class="items-list" role="table" aria-label="Line items"></div>
      <div class="toolbar-inline">
        <button id="addItem" class="btn primary" data-i18n="addItem">Add Item</button>
        <button id="clearItems" class="btn danger ghost" data-i18n="clearAll">Clear All</button>
      </div>
    </section>

    <!-- Notes / Terms -->
    <section class="card" aria-labelledby="sec-notes">
      <h2 id="sec-notes" data-i18n="notesTerms">Notes & Terms</h2>
      <div class="grid-2">
        <label data-i18n-label="notes">
          <span>Notes</span>
          <textarea id="notes" placeholder="Optional notes to the client"></textarea>
        </label>
        <label data-i18n-label="terms">
          <span>Terms</span>
          <textarea id="terms" placeholder="Payment due in 14 days. Late fees may apply."></textarea>
        </label>
      </div>
    </section>

    <!-- Totals (sticky) -->
    <section id="totals" class="card sticky" aria-live="polite">
      <div class="totals-row">
        <div data-i18n="subtotal">Subtotal</div><div id="subtotal">—</div>
      </div>
      <div class="totals-row">
        <div data-i18n="tax">Tax</div><div id="taxAmount">—</div>
      </div>
      <div class="totals-row total">
        <div data-i18n="total">Total</div><div id="grandTotal">—</div>
      </div>
    </section>
  </main>

  <!-- Floating action bar -->
  <nav class="fab" aria-label="Primary actions">
    <button id="previewPDF" class="btn primary" data-i18n="preview">Preview (Ctrl+P)</button>
    <button id="exportPDF" class="btn" data-i18n="export">Export PDF</button>
  </nav>

  <!-- Toasts -->
  <div id="toasts" class="toasts" aria-live="polite"></div>

  <!-- Pro 说明弹窗 -->
  <div id="proDlg" class="dialog-backdrop" role="dialog" aria-modal="true" aria-labelledby="proTitle" aria-hidden="true">
    <div class="dialog">
      <h3 id="proTitle">FreelanceKit Pro</h3>
      <p data-i18n="proIntro">Upcoming / rolling out:</p>
      <ul>
        <li data-i18n="proTpl">Template pack (no watermark)</li>
        <li data-i18n="proCsv">Clients/Projects CSV import</li>
        <li data-i18n="proBatch">Batch invoicing, Timesheet → Invoice</li>
        <li data-i18n="proWL">White-label option</li>
      </ul>
      <p><a href="https://ko-fi.com/loongtm" target="_blank" rel="noopener">https://ko-fi.com/loongtm</a></p>
      <div class="actions">
        <button id="proClose" class="btn primary" data-i18n="gotIt">Got it</button>
      </div>
    </div>
  </div>

  <footer class="container footer">
    <small class="muted">Made with FreelanceKit • <a href="/pages/privacy.html">Privacy</a> • <a href="/pages/terms.html">Terms</a></small>
  </footer>

  <script src="app.js" defer></script>
  <script src="sw.js" defer></script>
</body>
</html>
