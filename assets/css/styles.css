:root {
  --text: #0f172a;
  --muted: #64748b;
  --panel: #ffffff;
  --panel-2: #f8fafc;
  --primary: #4f46e5;
  --primary-2: #4338ca;
  --danger: #dc2626;
  --radius: 14px;
  --gap-unit: 14px;
  --control-h: 42px;
}

:root[data-theme="dark"] {
  --text: #f1f5f9;
  --muted: #94a3b8;
  --panel: #0f172a;
  --panel-2: #1e293b;
  --primary: #7c3aed;
  --primary-2: #2563eb;
  background: #020617;
  color: var(--text);
}

/* ========== 全局布局 ========== */
html, body {
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background: var(--panel-2);
  color: var(--text);
  font-size:16px;
  line-height:1.5;
}

.container {
  width:100%;
  max-width:1080px;
  margin:0 auto;
  padding:20px;
}

.header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 0;
}
.header-actions {
  display:flex;
  align-items:center;
  gap:10px;
}
.brand-logo {
  width:64px; height:64px;
}
.app-title {
  margin:0;
  font-size:1.6rem;
}

/* ========== 按钮 ========== */
.btn {
  display:inline-flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  font-size:1rem;
  border-radius: var(--radius);
  border:1px solid rgba(0,0,0,.08);
  padding:0 16px;
  min-height: var(--control-h);
  background:#fff;
  transition: all .2s ease;
}
.btn:hover {
  opacity:.9;
}
:root[data-theme="dark"] .btn {
  background: rgba(2,6,23,.45);
  color: var(--text);
  border:1px solid rgba(255,255,255,.06);
}
.btn.primary {
  background: linear-gradient(180deg, var(--primary), var(--primary-2));
  color:#fff;
  border:none;
}
.btn.ghost {
  background: transparent;
  border: 1px solid rgba(148,163,184,.22);
  color: var(--text);
}
.btn.lock {
  background: linear-gradient(135deg,#7c3aed 0%,#2563eb 60%);
  color:#fff;
  box-shadow:0 6px 18px -8px rgba(0,0,0,.6);
}

/* ========== Select / Input ========== */
.select-like {
  height: var(--control-h);
  padding: 0 12px;
  border-radius: var(--radius);
  border:1px solid rgba(148,163,184,.22);
  background:#fff;
  color:var(--text);
  font-size:1rem;
}
:root[data-theme="dark"] .select-like {
  background: rgba(2,6,23,.45);
  color: var(--text);
  border:1px solid rgba(255,255,255,.08);
}
:root[data-theme="dark"] .select-like option {
  background:#0b1220;
  color: var(--text);
}

input, textarea, select {
  width:100%;
  padding:10px 12px;
  border-radius: var(--radius);
  border:1px solid rgba(148,163,184,.22);
  background: var(--panel-2);
  color: var(--text);
}
input[aria-invalid="true"], select[aria-invalid="true"], textarea[aria-invalid="true"] {
  border-color: var(--danger);
}

/* field 块布局 */
.field {
  display:flex;
  flex-direction:column;
  gap:6px;
}
.field label {
  font-weight:600;
  color:var(--muted);
}
.field input, .field select, .field textarea {
  height: var(--control-h);
}

/* ========== 卡片容器 ========== */
.card {
  background: linear-gradient(180deg, var(--panel), var(--panel-2));
  border-radius: var(--radius);
  padding: var(--gap-unit);
  margin-bottom: var(--gap-unit);
  border:1px solid rgba(148,163,184,.08);
  box-shadow:0 12px 24px -16px rgba(0,0,0,.12);
}

/* ========== 栅格布局 ========== */
.grid-2 {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap: var(--gap-unit);
}
.grid-3 {
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap: var(--gap-unit);
}
@media (max-width:900px){
  .grid-2,.grid-3{grid-template-columns:1fr;}
}

/* ========== 行项目区 ========== */
.items-head, .item-row {
  display:grid;
  grid-template-columns:3fr .8fr 1fr .8fr 1fr 40px;
  gap:8px;
  align-items:center;
  margin-bottom: var(--gap-unit);
}
.item-row .row-del {
  border:none;
  background:transparent;
  color:var(--muted);
  cursor:pointer;
}

/* ========== 合计区 ========== */
.totals {
  margin-top: var(--gap-unit);
}
.totals-row {
  display:flex;
  justify-content:space-between;
  padding:8px 6px;
  border-top:1px dashed rgba(148,163,184,.2);
}

/* ========== 付款状态/备注区 ========== */
.payment-info {
  margin-top: var(--gap-unit);
}
.paid-status-wrapper {
  display:flex;
  align-items:center;
  gap:6px;
}
#paidStatus {
  width:1.2em;
  height:1.2em;
}

/* ========== 备注 & 条款 ========== */
.notes-terms {
  margin-top: var(--gap-unit);
}
.notes-terms .notes, .notes-terms .terms {
  background: var(--panel);
  padding: var(--gap-unit);
  border-radius: var(--radius);
}

/* ========== 浮动底部按钮 ========== */
.fab {
  position:fixed;
  left:0; right:0; bottom:14px;
  display:flex;
  justify-content:center;
  gap: var(--gap-unit);
  z-index:50;
  padding:8px;
}

/* ========== 返回链接 ========== */
.back-link {
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:8px 14px;
  border-radius:28px;
  background:rgba(255,255,255,.9);
  text-decoration:none;
  color: var(--text);
  border:1px solid rgba(0,0,0,.04);
}
:root[data-theme="dark"] .back-link {
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.04);
}

/* ========== Dialog (Pro) ========== */
.dialog-backdrop {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.5);
  display:grid;
  place-items:center;
  z-index:100;
}
.dialog {
  background: var(--panel);
  border-radius: var(--radius);
  padding:20px;
  max-width:360px;
  text-align:center;
}
.dialog .actions {
  display:flex;
  justify-content:center;
  gap:10px;
  margin-top:20px;
}
